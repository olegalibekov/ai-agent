Retrieval-Augmented Generation (RAG) — это архитектурный подход, при котором модель генерирует ответ не только на основе своих параметров, но и на основе внешних данных, найденных в индексе документов.

Ключевые компоненты RAG

Хранилище документов
Это может быть файловая система, S3-совместимое хранилище, база данных или Wiki. Важно, чтобы документы можно было регулярно обновлять.

Индекс векторного поиска

Эмбеддинги текста создаются с помощью модельки эмбеддингов (например, multilingual модели).

Векторы и метаданные сохраняются в хранилище:

FAISS (локально или как сервис),

Elasticsearch/OpenSearch,

векторные базы данных (Qdrant, Weaviate, Milvus и т.п.).

Ретраивер (retriever)
Принимает текст запроса, вычисляет его эмбеддинг и ищет ближайшие по косинусной близости или dot-product документы.

Генератор (LLM)
Получает:

вопрос пользователя,

контекст в виде нескольких релевантных чанков текста.

На основе этого генерируется финальный ответ.

Пример пайплайна (упрощённо)

Пользователь спрашивает: «Как оформить отпуск в компании?»

Запрос превращается в вектор.

Вектор подаётся в FAISS-индекс; в ответ приходят 3–5 фрагментов из внутренних регламентов.

Эти фрагменты вставляются в prompt к языковой модели вместе с вопросом.

LLM генерирует связный ответ, ссылаясь на найденные фрагменты.

Зачем RAG в корпоративных приложениях

Актуальность: модель не надо переобучать при каждом изменении регламентов.

Контролируемость: можно явно указать, из каких источников брать информацию.

Снижение галлюцинаций: ответы опираются на реальные документы.